# TORISETSU - マニュアル作成自動化アプリ要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名・サービス名
**TORISETSU**
- マニュアル作成自動化アプリ（Manual Creation Automation App）

### 1.2 目的
ユーザーがブラウザでアプリを操作する様子を録画し、AI（Gemini API）を活用して自動的に操作マニュアルを生成するWebアプリケーションの開発。



## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 画面録画機能
- **機能名**: スクリーンレコーディング
- **詳細**: 
  - ブラウザタブまたは画面全体の録画
  - WebRTC Screen Capture APIを使用
  - 録画開始/停止/一時停止機能
  - 録画品質設定（解像度、フレームレート）
- **技術要件**: 
  - MediaRecorder API
  - getUserMedia() with screen capture
  - WebM/MP4形式での保存

#### 2.1.2 AI マニュアル生成機能
- **機能名**: 自動マニュアル生成
- **詳細**:
  - Gemini APIに動画ファイルを送信
  - ステップバイステップの操作手順を自動生成
  - スクリーンショットの自動抽出と説明文生成
- **技術要件**:
  - Google Gemini API統合
  - 動画フレーム抽出
  - プロンプトエンジニアリング

#### 2.1.3 マニュアル編集機能
- **機能名**: マニュアルエディター
- **詳細**:
  - リッチテキストエディター
  - ステップの追加/削除/並び替え
  - 画像の追加/削除/編集
  - テキストの修正
- **技術要件**:
  - WYSIWYG エディター（例: TinyMCE, Quill）
  - ドラッグ&ドロップ機能

### 2.2 データ管理機能

#### 2.2.1 ワークスペース管理
- **機能名**: ワークスペース
- **詳細**:
  - 複数ワークスペースの作成・管理
  - ワークスペース間の切り替え
  - アクセス権限管理
- **データ構造**:
  ```json
  {
    "id": "workspace_id",
    "name": "ワークスペース名",
    "description": "説明",
    "created_at": "2025-01-01T00:00:00Z",
    "updated_at": "2025-01-01T00:00:00Z",
    "owner_id": "user_id",
    "members": ["user_id1", "user_id2"]
  }
  ```

#### 2.2.2 プロジェクト管理
- **機能名**: プロジェクト
- **詳細**:
  - ワークスペース内でのプロジェクト作成・管理
  - プロジェクトのカテゴリ分類
  - プロジェクトの共有設定
- **データ構造**:
  ```json
  {
    "id": "project_id",
    "workspace_id": "workspace_id",
    "name": "プロジェクト名",
    "description": "説明",
    "category": "カテゴリ",
    "created_at": "2025-01-01T00:00:00Z",
    "updated_at": "2025-01-01T00:00:00Z"
  }
  ```

#### 2.2.3 マニュアル管理
- **機能名**: マニュアル
- **詳細**:
  - プロジェクト内でのマニュアル作成・管理
  - バージョン管理
  - ステータス管理（下書き、レビュー中、公開済み）
- **データ構造**:
  ```json
  {
    "id": "manual_id",
    "project_id": "project_id",
    "title": "マニュアルタイトル",
    "content": "マニュアル内容（JSON形式）",
    "status": "draft|review|published",
    "version": "1.0",
    "video_file_path": "/path/to/video.webm",
    "created_at": "2025-01-01T00:00:00Z",
    "updated_at": "2025-01-01T00:00:00Z"
  }
  ```



## 3. 非機能要件

### 3.1 性能要件
- **動画アップロード**: 最大100MBまでのファイル対応
- **レスポンス時間**: API呼び出し30秒以内
- **同時接続数**: 100ユーザーまで対応

### 3.2 セキュリティ要件
- **認証**: Simple JWT または Basic Auth（ローカル用）
- **データ保護**: ローカルファイルシステムでの安全な保存
- **API セキュリティ**: CORS設定、入力値検証

### 3.3 可用性要件
- **ローカル環境**: 単一マシンでの動作
- **データバックアップ**: 手動バックアップ機能
- **障害対応**: ローカルでの復旧手順

## 4. 技術仕様

### 4.1 アーキテクチャ（ローカル環境）
- **フロントエンド**: React.js + TypeScript
- **バックエンド**: Python + FastAPI
- **データベース**: SQLite（ローカル開発用）
- **ファイルストレージ**: ローカルファイルシステム
- **AI API**: Google Gemini API

### 4.2 主要ライブラリ・サービス
- **録画**: MediaRecorder API
- **動画処理**: OpenCV (Python)
- **エディター**: React Quill または TinyMCE
- **バックエンド**: FastAPI + SQLAlchemy
- **認証**: Simple JWT または Basic Auth（ローカル用）

### 4.3 API設計

#### 4.3.1 エンドポイント一覧
```
POST /api/workspaces - ワークスペース作成
GET /api/workspaces - ワークスペース一覧
POST /api/projects - プロジェクト作成
GET /api/projects/:workspace_id - プロジェクト一覧
POST /api/manuals - マニュアル作成
PUT /api/manuals/:id - マニュアル更新
POST /api/manuals/:id/generate - AI マニュアル生成
POST /api/upload/video - 動画アップロード
```

## 5. ユーザーストーリー

### 5.1 基本フロー
1. **ユーザー登録・ログイン**
   - ユーザーはアカウントを作成してログインする

2. **ワークスペース作成**
   - ユーザーは新しいワークスペースを作成する

3. **プロジェクト作成**
   - ワークスペース内でプロジェクトを作成する

4. **画面録画**
   - ブラウザでアプリを操作しながら画面を録画する

5. **マニュアル生成**
   - 録画した動画をアップロードし、AIでマニュアルを自動生成する

6. **マニュアル編集**
   - 生成されたマニュアルを確認し、必要に応じて編集する

## 6. 画面設計

### 6.1 主要画面
- **ダッシュボード**: ワークスペース・プロジェクト一覧
- **録画画面**: 録画コントロールとプレビュー
- **マニュアルエディター**: リッチテキストエディター
- **プロジェクト管理画面**: プロジェクト設定と管理

この要件定義書をベースに、Claude Codeを使用してシステム開発を進めることができます。